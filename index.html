<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Blockchain Explorer</title>
    </head>
    <body>
        <table id="block" width="100%">
            <tr>
                <th>Number</th>
                <th>Hash</th>
                <th>Timestamp</th>
            </tr>
        </table>
        <script src="./web3.min.js"></script>
        <script>
            window.onload = function(){
                updateBlocks();
            };
            function updateBlocks(){
                let web3 = new web3(web3.givenProvider);
                let latest = await web3.eth.getBlockNumber();
                
                for (var i=0;i<10;i++){
                    let Block = await web3.eth.getBlock(latest-i);
                    printBlock(Block);
                }
            }
            function printBlock(Block){
                var table = document.getElementById('blocks');
                var row = table.insertRow(-1);
                var cell1 = row.incertCell(0);
                var cell2 = row.incertCell(1);
                var cell3 = row.incertCell(2);
                cell1.innerHTML = block.Number;
                cell2.innerHTML = block.Hash;
                cell3.innerHTML = block.Timestamp;
            }
        </script>
    </body>
</html>